(function(e){function t(t){for(var o,s,r=t[0],c=t[1],l=t[2],d=0,h=[];d<r.length;d++)s=r[d],i[s]&&h.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},a=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("64a9"),i=n.n(o);i.a},1963:function(e,t,n){"use strict";var o=n("dcf1"),i=n.n(o);i.a},"2b5f":function(e,t,n){e.exports=n.p+"img/clock.1ad24772.png"},"2f14":function(e,t,n){"use strict";n("9c29"),n("ac6a"),n("34ef"),n("28a5"),n("55dd"),n("6b54");function o(e){var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),i=e.getHours(),s=e.getMinutes(),r=e.getSeconds();return[t,n,o].map(a).join("/")+" "+[i,s,r].map(a).join(":")}function i(e){var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return e.getHours(),e.getMinutes(),e.getSeconds(),[t,n,o].map(a).join("-")+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function a(e){return(e=e.toString())[1]?e:"0"+e}function s(e){var t="";for(var n in e)t+="&"+n+"="+e[n];return t.substr(1)}function r(e){var t={};t=Object.assign(t,e,{secret:"6C928F35692B4FFB90A26B16E0127FBCAC699AFF"});var n=[];for(var o in t)n.push(o);n.sort();var i=[];for(var a in n){var s=n[a],r=t[s];i.push(s+""+r)}var c=i.join("");return l(c).toUpperCase()}function c(e){var t=new Image;t.src=e;var n=document.createElement("canvas"),o=n.getContext("2d");t.onload=function(){var e=this.width,i=this.height,a=300,s=300,r=e,c=i;(e>a||i>s)&&(e/i>a/s?(r=a,c=Math.round(a*(i/e))):(c=s,r=Math.round(s*(e/i)))),n.width=r,n.height=c,o.clearRect(0,0,r,c),o.drawImage(t,0,0,r,c);var l="image/jpeg",u=n.toDataURL(l);console.log(u);for(var d=atob(u.split(",")[1]),h=new Uint8Array(d.length),m=0;m<d.length;m++)h[m]=d.charCodeAt(m);var g=new Blob([h.buffer],{type:l}),p=window.URL.createObjectURL(g);console.log(p)}}function l(e){var t,n,o=new Uint8Array(u(e)),i=16+(o.length+8>>>6<<4);e=new Uint8Array(i<<2);for(e.set(new Uint8Array(o.buffer)),e=new Uint32Array(e.buffer),n=new DataView(e.buffer),h=0;h<i;h++)e[h]=n.getUint32(h<<2);e[o.length>>2]|=128<<24-8*(3&o.length),e[i-1]=o.length<<3;var a=[],s=[function(){return l[1]&l[2]|~l[1]&l[3]},function(){return l[1]^l[2]^l[3]},function(){return l[1]&l[2]|l[1]&l[3]|l[2]&l[3]},function(){return l[1]^l[2]^l[3]}],r=function(e,t){return e<<t|e>>>32-t},c=[1518500249,1859775393,-1894007588,-899497514],l=[1732584193,-271733879,null,null,-1009589776];for(l[2]=~l[0],l[3]=~l[1],h=0;h<e.length;h+=16){var d=l.slice(0);for(t=0;t<80;t++)a[t]=t<16?e[h+t]:r(a[t-3]^a[t-8]^a[t-14]^a[t-16],1),n=r(l[0],5)+s[t/20|0]()+l[4]+a[t]+c[t/20|0]|0,l[1]=r(l[1],30),l.pop(),l.unshift(n);for(t=0;t<5;t++)l[t]=l[t]+d[t]|0}n=new DataView(new Uint32Array(l).buffer);for(var h=0;h<5;h++)l[h]=n.getUint32(h<<2);var m=Array.prototype.map.call(new Uint8Array(new Uint32Array(l).buffer),function(e){return(e<16?"0":"")+e.toString(16)}).join("");return m}function u(e){var t,n,o,i=[];for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?i.push(n):n<2048?i.push(192+(n>>6&31),128+(63&n)):((o=55296^n)>>10==0?(n=(o<<10)+(56320^e.charCodeAt(++t))+65536,i.push(240+(n>>18&7),128+(n>>12&63))):i.push(224+(n>>12&15)),i.push(128+(n>>6&63),128+(63&n)));return i}t["a"]={gainPhone:r,formatTime:o,objectToUrlParams:s,formatData:i,compressPictures:c,scene_decode:function(e){var t=(e+"").split(","),n={};for(var o in t){var i=t[o].split(":");0<i.length&&i[0]&&(n[i[0]]=i[1]||null)}return n}}},"46f0":function(e,t,n){"use strict";var o=n("67a6"),i=n.n(o);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],s=(n("6e78"),{name:"app",created:function(){}}),r=s,c=(n("034f"),n("2877")),l=Object(c["a"])(r,i,a,!1,null,null,null),u=l.exports,d=n("5c96"),h=n.n(d),m=n("8c4f"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"limiter"},[n("div",{staticClass:"container"},[n("div",{staticClass:"wrap-login100 p-l-55 p-r-55 p-t-60 p-b-54"},[n("span",{staticClass:"login100-form-title p-b-35"},[e._v("加马客服系统登录")]),n("div",{staticClass:"txt1 text-center"}),e._m(0),n("div",{staticClass:"container-login100-form-btn m-t-10"},[n("div",{staticClass:"wrap-login100-form-btn"},[n("div",{staticClass:"login100-form-bgbtn"}),n("button",{staticClass:"login100-form-btn",attrs:{id:"btn"},on:{click:e.btn}},[e._v("加马语聊账号登录")])])]),e._m(1)])])])},p=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"flex-c-m"},[o("a",{staticClass:"login100-social-item",attrs:{href:"http://oauth.jiama.online/oauth/login?which=username&display=pc&appKey=7863228592&redirect_url=127.0.0.1:8080"}},[o("img",{staticStyle:{width:"200px",height:"200px"},attrs:{src:n("89a1")}})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-col-c p-t-55"},[n("div",{staticClass:"copyright txt2"},[n("a",{attrs:{href:"http://jiama.online/",target:"_blank"}},[e._v("杭州加马行乐")]),e._v(" 版权所有 ©2018-2019\n            ")])])}],f={data:function(){return{}},methods:{btn:function(){window.location.href="http://oauth.jiama.online/oauth/login?which=username&display=pc&appKey=7863228592&redirect_url=http:127.0.0.1:8080"}}},v=f,A=(n("1963"),Object(c["a"])(v,g,p,!1,null,"1017796e",null)),y=A.exports;o["default"].use(m["a"]);var b,I=new m["a"]({mode:"history",routes:[{path:"/",name:"index",component:function(){return Promise.resolve().then(n.bind(null,"6e78"))},meta:{title:"客服首页",tabbar:!0}},{path:"/login",name:"login",component:y,meta:{title:"登陆",tabbar:!0}}]}),C=n("2f62"),w=n("bd86"),O=n("9fb0"),k=n("a474"),x={accountID:"hahahha",headPic:"",nickName:"",sex:"",cityCode:""},L={},S={},D=(Date.parse(new Date),b={},Object(w["a"])(b,O["d"],function(e,t){return new Promise(function(e,n){k["a"].getKfInfo({accountID:t}).then(function(t){console.log("res"),e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["g"],function(e,t){return new Promise(function(e,n){t.accountID?k["a"].listOrder({status:t.status,isKF:"1",accountID:t.accountID}).then(function(t){e(t)}).catch(function(e){console.log(e),n(e)}):k["a"].listOrder({status:t.status,isKF:"1"}).then(function(t){e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["h"],function(e,t){return new Promise(function(e,n){k["a"].listPushOrder({userStatus:"0",orderStatus:"0",accountID:t.accountID}).then(function(t){e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["k"],function(e,t){return new Promise(function(e,n){k["a"].updateOrder(t).then(function(t){e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["b"],function(e,t){return new Promise(function(e,n){k["a"].endOrder({orderID:t}).then(function(t){e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["i"],function(e,t){return new Promise(function(e,n){k["a"].outKfChannel(t).then(function(t){e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["f"],function(e,t){return console.log("GET_USER_INFO==="),new Promise(function(e,n){k["a"].joinChannel({userInfo:{accountID:t.accountID,nickName:t.user_name,headPic:t.user_avatar,lng:t.lng,lat:t.lat,userType:t.userType},channelID:t.channelID,orderID:t.orderID}).then(function(t){e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["e"],function(e,t){return console.log("INIT_ORDER==="),console.log(t),new Promise(function(e,n){k["a"].initOrder(t).then(function(t){e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["c"],function(e,t){return new Promise(function(e,n){k["a"].getChatLog(t).then(function(t){console.log(t),e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["a"],function(e,t){return new Promise(function(e,n){k["a"].addChatLog(t).then(function(t){console.log(t),e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["m"],function(e,t){return new Promise(function(e,n){k["a"].uploadOssImg(t).then(function(t){console.log(t),e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["l"],function(e,t){return new Promise(function(e,n){k["a"].uploadOssFile(t).then(function(t){console.log(t),e(t)}).catch(function(e){console.log(e),n(e)})})}),Object(w["a"])(b,O["j"],function(e,t){return new Promise(function(e,n){k["a"].refreshMsgToken(t).then(function(t){console.log(t),e(t)}).catch(function(e){console.log(e),n(e)})})}),b),_={state:x,getters:L,actions:D,mutations:S};o["default"].use(C["a"]);var T=new C["a"].Store({modules:{userinfo:_}});n("0fae");o["default"].config.productionTip=!1,o["default"].use(h.a),I.beforeEach(function(e,t,n){n()}),new o["default"]({store:T,router:I,render:function(e){return e(u)},created:function(){}}).$mount("#app")},"64a9":function(e,t,n){},"67a6":function(e,t,n){},"6e78":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"main"},[o("div",{staticClass:"nav-bar"},[o("div",{staticClass:"nav-left"},[o("img",{attrs:{src:n("e6cb"),onerror:e.errorImgSrc,alt:""}}),o("div",[o("h3",{on:{click:e.updataMapOverview}},[e._v("加马——船帮帮客服工作平台")]),o("p",[e._v("Jiama Service")])])]),o("div",{staticClass:"nav-right"},[o("img",{attrs:{src:e.userInfo.headPic,onerror:e.errorImgSrc,alt:""}}),o("div",[o("p",[e._v(e._s(e.userInfo.nickName))])]),o("button",{on:{click:e.workquit}},[e._v("准备下班 "),o("i",{staticClass:"iconfont icon-shangxiaban-copy"})])])]),o("audio",{attrs:{id:"callout",src:"./public/callout.mp3"}}),o("audio",{attrs:{id:"off",src:"./public/off.mp3"}}),o("el-dialog",{attrs:{visible:e.readyWorkOut,width:"30%",center:""},on:{"update:visible":function(t){e.readyWorkOut=t}}},[o("div",{staticClass:"dialogVisibleOff"},[o("div",[o("i",{staticClass:"iconfont icon-guanbi"}),o("p",{staticClass:"guanbi-p",staticStyle:{color:"#ff5f49"}},[e._v("下班退出")])]),o("p",{staticClass:"dialog-p",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[e._v("今天已经工作了")]),o("p",{staticStyle:{"font-size":"18px","font-weight":"bold",color:"black"}},[e._v(e._s(e.duration))]),this.innerLeftList.length>=1?o("p",{staticClass:"dialog-p",staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[e._v("当前有"+e._s(this.innerLeftList.length)+"个咨询对话未结束")]):e._e(),this.innerLeftList.length>=1?o("p",{staticClass:"dialog-p"},[e._v("您可以选择移交给别的客服进行服务")]):e._e(),this.innerLeftList.length>=1?o("button",{staticClass:"Off-button",staticStyle:{"background-color":"#4ed7d1","margin-top":"22px"},on:{click:e.transfer}},[e._v("\n          移交咨询\n        ")]):e._e(),o("button",{staticClass:"Off-button",staticStyle:{"background-color":"#ff5f49","margin-bottom":"21px"},on:{click:e.holdout}},[e._v("\n          确定下班\n        ")]),o("p",{staticStyle:{"font-size":"16px",color:"#4ed7d1","margin-bottom":"10px"},on:{click:function(t){e.dialogVisiblereadyOff=!1}}},[e._v("\n          我点错了，继续努力\n        ")])])]),o("el-dialog",{attrs:{visible:e.dialogVisibleTransfer,width:"760px",title:"移交给",center:""},on:{"update:visible":function(t){e.dialogVisibleTransfer=t}}},[o("div",{staticClass:"dialogTransfer"},e._l(e.TranserList,function(t,n){return o("div",{key:n,on:{click:function(o){return e.SelectTransfer(t,n)}}},[o("span",[e.Tindex==n?o("i",{staticClass:"iconfont icon-selected"}):e._e(),e.Tindex!==n?o("i",{staticClass:"iconfont icon-yuan"}):e._e()]),o("img",{attrs:{src:t.headPic,alt:""}}),o("p",[e._v(e._s(t.nickName))])])}),0),o("div",{staticClass:"endOrder-button"},[o("button",{on:{click:function(t){e.dialogVisibleTransfer=!1}}},[e._v("取消")]),o("button",{on:{click:e.userTransfer}},[e._v("确认")])])]),o("div",{staticClass:"inner"},[o("div",{staticClass:"inner-left"},[o("el-tabs",{staticStyle:{width:"100%"},attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:e.currentService}},[o("ul",e._l(e.innerLeftList,function(t,n){return o("li",{key:n,on:{click:function(o){return e.getMessageInfo(t,n,"start")}}},[o("div",{staticClass:"inner-left-li-list",class:n==e.index?"messageListStyle":" "},[o("img",{attrs:{src:t.user_avatar,alt:""}}),o("div",[o("p",[e._v(e._s(t.user_name))]),o("span",[e._v(e._s(e._f("timeFormat")(t.start_time)))])]),t.tip>0?o("div",{staticClass:"tip"},[e._v(e._s(t.tip))]):e._e(),t.leftListCover?o("div",{staticClass:"leftListCover"},[e._v("\n              当前服务单已被用户结束\n            ")]):e._e()])])}),0)]),o("el-tab-pane",{attrs:{label:"已结束服务"}},[o("ul",e._l(e.endOrderList,function(t,n){return o("li",{key:n,on:{click:function(o){return e.getMessageInfo(t,n,"end")}}},[o("div",{staticClass:"inner-left-li-list",class:n==e.endindex?"messageListStyle":" "},[o("img",{attrs:{src:t.user_avatar,alt:""}}),o("div",[o("p",[e._v(e._s(t.user_name))]),o("span",[e._v("5分钟前")])])])])}),0)])],1)],1),o("div",{staticClass:"locationSign"},[e._v("\n      位置: {全国}\n    ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.containerVisible2,expression:"containerVisible2"}],staticClass:"SwitchPage",on:{click:e.SwitchPage}},[e._v("\n      点击进入抢单页面\n    ")]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.containerVisible2,expression:"containerVisible2"}],staticClass:"seachLocation"},[e._m(0),o("div",{staticStyle:{border:"1px solid #C0C0C0",width:"150px",height:"auto",display:"none"},attrs:{id:"searchResultPanel"}})]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.containerVisible,expression:"containerVisible"}],attrs:{id:"container"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.containerVisible2,expression:"containerVisible2"}],attrs:{id:"container2"}}),o("el-dialog",{staticClass:"endOrder",attrs:{visible:e.dialogVisibleEndOrder,width:"38%",title:"结束咨询",center:""},on:{"update:visible":function(t){e.dialogVisibleEndOrder=t}}},[o("div",{staticClass:"endOrder-time"},[o("div",[o("p",[e._v("咨询时间")]),o("p",{staticClass:"time bg"},[e._v(e._s(e.startTime))])]),o("div",[o("p",[e._v("结束时间")]),o("p",{staticClass:"time bg"},[e._v(e._s(e.endTime))])]),o("div",[o("p",[e._v("服务时长")]),o("p",{staticClass:"time"},[e._v(e._s(e.duration))])])]),o("div",{staticClass:"endOrder-adress"},[o("p",[e._v("咨询地址")]),0==e.edit?o("div",{staticClass:"bg text"},[e._v("请输入地址")]):1==e.edit?o("input",{directives:[{name:"model",rawName:"v-model",value:e.inputEndOrderAdress,expression:"inputEndOrderAdress"}],staticClass:"bg",attrs:{type:"text",placeholder:"请输入地址"},domProps:{value:e.inputEndOrderAdress},on:{input:function(t){t.target.composing||(e.inputEndOrderAdress=t.target.value)}}}):e._e(),o("i",{staticClass:"iconfont icon-iconfront-",on:{click:function(t){e.edit=1}}})]),o("div",{staticClass:"endOrder-desc"},[o("p",[e._v("咨询问题描述")]),o("el-input",{staticClass:"bg",attrs:{type:"textarea",autosize:{minRows:5,maxRows:20},placeholder:"请输入内容"},model:{value:e.textareaEndOrderDesc,callback:function(t){e.textareaEndOrderDesc=t},expression:"textareaEndOrderDesc"}})],1),o("div",{staticClass:"endOrder-button"},[o("button",{on:{click:function(t){e.dialogVisibleEndOrder=!1}}},[e._v("取消")]),o("button",{on:{click:e.EndOrder}},[e._v("确认")])])]),e.callShow?o("div",{staticClass:"callListDialog"},[o("div",{staticClass:"userListBox"},[o("div",{staticClass:"header"},[e._v("\n                选择呼叫的人员\n                "),o("i",{staticClass:"el-icon-close",on:{click:e.hiddenDialog}})]),0!==e.callUserList.length?o("ul",e._l(e.callUserList,function(t,n){return o("li",{key:n,on:{click:function(n){return e.ischeck(t)}}},[t.check?e._e():o("i",{staticClass:"iconfont icon-weigouxuan"}),t.check?o("i",{staticClass:"iconfont icon-gouxuan-xuanzhong-yuankuang"}):e._e(),o("img",{attrs:{src:t.headPic,alt:""}}),o("span",[e._v(e._s(t.nickName))])])}),0):e._e(),0!==e.callUserList.length?o("div",{staticClass:"buttonBox"},[o("el-button",{attrs:{type:"info"},on:{click:e.allNoCheck}},[e._v("全部取消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.startCall}},[e._v("开始呼叫 ("+e._s(e.clickItemUserList.length)+"人)")])],1):e._e(),0===e.callUserList.length?o("div",{staticStyle:{width:"100%","text-align":"center",height:"300px","line-height":"300px","letter-spacing":"3px","font-size":"22px",color:"#ccc"}},[e._v("无在线人员")]):e._e()])]):e._e(),e.infoShow?o("div",{staticClass:"callListDialog infoDialog"},[o("div",{staticClass:"infoBox"},[1===e.clickItemUserList.length?o("div",{staticClass:"info"},[o("img",{attrs:{src:e.clickItemUserList[0].headPic,alt:""}}),o("span",[e._v(e._s(e.clickItemUserList[0].nickName))])]):e._e(),e.clickItemUserList.length>1?o("ul",e._l(e.clickItemUserList,function(t,n){return o("li",{key:n},[o("img",{attrs:{src:t.headPic,alt:""}}),o("span",[e._v(e._s(t.nickName))])])}),0):e._e(),o("div",{staticClass:"textarea"},[o("el-input",{attrs:{type:"textarea",rows:3,maxlength:72,resize:"none",placeholder:"请输入呼叫理由(最多72个字)"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),o("el-button",{attrs:{type:"primary"},on:{click:e.sureCall}},[e._v("确认呼叫")]),o("p",{on:{click:function(t){e.infoShow=!1}}},[e._v("我点错了")])],1)])]):e._e(),e.roomAdminShow?o("div",{staticClass:"callListDialog roomDialog"},[o("div",{staticClass:"infoBox"},[o("div",{staticClass:"info"},[o("img",{attrs:{src:e.clickItemUser.headPic,alt:""}}),o("span",[e._v(e._s(e.clickItemUser.nickName))])]),o("div",{staticClass:"textarea"},[o("el-button",{attrs:{type:"primary"},on:{click:e.kickoutUser}},[e._v("踢出通话")]),o("p",{on:{click:function(t){e.roomAdminShow=!1}}},[e._v("关闭")])],1)])]):e._e(),e.onlineCallShow?o("div",{staticClass:"onlineCallDialog"},[o("img",{staticClass:"bg",attrs:{src:n("e6cb"),alt:""}}),o("div",{staticClass:"title"},[e._v("在线呼叫 "+e._s(e.callList.length)+"人")]),o("ul",{staticClass:"clearfix"},[e._l(e.callList,function(t,n){return o("li",{key:n,on:{click:function(n){return e.toAdminRoom(t)}}},[t.online?e._e():o("div",[o("i",{staticClass:"el-icon-more"})]),o("img",{attrs:{src:t.headPic,alt:""}}),o("span",{class:t.online?"":"ccc"},[e._v(e._s(t.nickName))])])}),e.callList.length<9?o("li",{staticClass:"add",on:{click:e.addCallUser}},[o("i",{staticClass:"el-icon-circle-plus-outline"}),o("span",[e._v("添加")])]):e._e()],2),o("div",{attrs:{id:"ado"}}),o("div",{staticClass:"btn"},[o("span",{on:{click:e.leaveRoom}},[o("i",{staticClass:"iconfont iconguaduan"})]),e.metud?e._e():o("i",{staticClass:"el-icon-microphone",on:{click:function(t){return e.toMetud(!0)}}}),e.metud?o("i",{staticClass:"el-icon-turn-off-microphone",on:{click:function(t){return e.toMetud(!1)}}}):e._e()])]):e._e(),o("el-dialog",{attrs:{visible:e.WxAcodeVisible,width:"40%",title:"添加协助人员",center:""},on:{"update:visible":function(t){e.WxAcodeVisible=t}}},[o("div",{staticClass:"WxAcodeDiv",staticStyle:{"text-align":"center"}},[o("div",[e._v("\n            微信扫描下方二维码，分享协助邀请给你的微信好友，邀请好友进来协助。\n          ")]),o("img",{attrs:{src:e.WxAcode}})])]),o("div",{directives:[{name:"show",rawName:"v-show",value:e.innerRightVisible,expression:"innerRightVisible"}],staticClass:"inner-right"},[o("div",{staticClass:"inner-right-nav"},[o("span",{staticClass:"inner-right-nav-span"},[e._v("当前服务")]),o("div",{staticStyle:{width:"67%",overflow:"hidden"}},e._l(e.innerRightOrderMember,function(t,n){return o("img",{key:n,attrs:{src:t.headPic,onerror:e.errorImgSrc,title:t.nickName}})}),0),o("i",{directives:[{name:"show",rawName:"v-show",value:"start"==this.currentServiceInfo.option,expression:"this.currentServiceInfo.option == 'start'"}],staticClass:"iconfont icon-jiahao",on:{click:e.getWxAcode}}),o("p",{directives:[{name:"show",rawName:"v-show",value:"start"==this.currentServiceInfo.option,expression:"this.currentServiceInfo.option == 'start'"}],staticClass:"inner-right-nav-p",on:{click:e.EndOrderStart}},[e._v("\n          结束咨询\n        ")])]),o("div",{staticClass:"inner-right-content",attrs:{id:"socketMessageList"}},[e.loading?o("p",{staticClass:"loadingStyle"},[o("img",{attrs:{src:e.loadingImg,alt:""}})]):e._e(),e.noMore?o("p",{staticClass:"loadingStyle"},[e._v("没有更多了")]):e._e(),o("ul",{staticClass:"list",attrs:{id:"socketMessageListUl"}},e._l(e.chatMessageList,function(t,n){return o("li",{key:n,staticClass:"list-item"},["groupText"==t.msgType||"groupPic"==t.msgType||"groupVoice"==t.msgType||"groupMap"==t.msgType?o("div",{class:e.messageStyle(t.accountID)},[o("img",{staticClass:"message-item-pic",attrs:{src:t.msgObj.sh,alt:""}}),o("div",{staticClass:"flex message-box",attrs:{"data-v-79408788":""}},[o("div",[o("div",{staticClass:"message-box-top"},[o("span",{staticClass:"name"},[e._v(e._s(t.msgObj.sn))]),o("span",{staticClass:"day"},[e._v(e._s(e._f("timeFormat")(t.msgTime)))])]),o("div",{staticClass:"bubble_cont basi left"},["groupText"==t.msgType?o("div",{staticClass:"card1"},[o("p",{staticClass:"puretext font14 c333 wordbreak",staticStyle:{height:"auto"}},[e._v(e._s(t.msgObj.text))])]):"groupVoice"==t.msgType?o("div",{staticClass:"card1"},[o("video",{attrs:{controls:"",name:"media"}},[o("source",{attrs:{type:"audio/aac",src:t.msgObj.vu[0].url}})])]):"groupMap"==t.msgType?o("div",{staticClass:"card1"},[o("div",{staticClass:"groupMap",attrs:{id:"groupMap"+t.msgTime}})]):"groupPic"==t.msgType?o("div",{staticClass:"card1",attrs:{accept:"image/*"}},[o("img",{attrs:{src:t.msgObj.url,alt:""}})]):e._e()])])])]):"kfNotice"==t.msgType||"kfWelcome"==t.msgType||"kfEnd"==t.msgType?o("p",{staticClass:"systemMessage"},[e._v("\n                "+e._s(t.msgObj.content)+"\n            ")]):"groupEnd"==t.msgType?o("p",{staticClass:"systemMessage"},[e._v("\n                "+e._s(t.msgObj.content)+"\n            ")]):"userState"==t.msgType?o("div",{staticClass:"userMessage"},[1==t.msgObj.st?o("p",[e._v("\n                 "+e._s(e._f("timeFormat")(t.msgTime))+" "+e._s(t.msgObj.un)+"上线了\n                ")]):e._e(),0==t.msgObj.st?o("p",[e._v("\n                 "+e._s(e._f("timeFormat")(t.msgTime))+" "+e._s(t.msgObj.un)+"下线了\n                ")]):e._e(),-1==t.msgObj.st?o("p",[e._v("\n                 "+e._s(e._f("timeFormat")(t.msgTime))+" "+e._s(t.msgObj.un)+"离开群组\n                ")]):e._e()]):e._e()])}),0)]),o("div",{staticClass:"inner-right-input"},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:5},placeholder:"请输入聊天内容"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessageInfo(e.socketMessageText,"groupText")}},model:{value:e.socketMessageText,callback:function(t){e.socketMessageText=t},expression:"socketMessageText"}}),o("div",{staticClass:"inner-right-input-buttom"},[o("div",{staticClass:"inner-right-input-buttom-left"},[o("el-popover",{ref:"popover5",attrs:{placement:"top"},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[o("div",{staticClass:"CommonWord"},[o("p",{staticClass:"CommonTitle"},[e._v("常用话")]),o("ul",e._l(this.commonWordList,function(t,n){return o("li",{key:n},[o("div",{staticClass:"content"},[e._v(e._s(t))]),o("div",{staticClass:"send",on:{click:function(n){return e.sendMessageInfo(t,"groupText")}}},[e._v("发送")])])}),0)])]),o("div",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}]},[e._v("常用语")]),o("el-popover",{ref:"popover4",attrs:{placement:"top"},model:{value:e.visible3,callback:function(t){e.visible3=t},expression:"visible3"}},[o("div",{staticClass:"CommonWord"},[o("p",{staticClass:"CommonTitle"},[e._v("常见问题")]),o("ul",e._l(this.commonProblemList,function(t,n){return o("li",{key:n},[o("div",{staticClass:"content"},[e._v("\n                     "+e._s(t)+"\n                    ")]),o("div",{staticClass:"send",on:{click:function(n){return e.sendMessageInfo(t,"groupText")}}},[e._v("\n                       发送\n                    ")])])}),0)])]),o("div",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"commonProblem"},[e._v("常见问题")]),o("div",{on:{click:e.sendLocation}},[e._v("发送位置")])],1),o("div",{staticClass:"bottom-right"},[o("div",{staticClass:"inner-right-input-buttom-right"},[o("input",{staticClass:"uploadInput",attrs:{type:"file",id:"uploadInput",accept:"image/*"},on:{change:e.sendImg}}),o("i",{staticClass:"iconfont icon-tupian"}),o("i",{staticClass:"iconfont icon-lianxi1",on:{click:e.toCall}}),o("i",{staticClass:"iconfont icon-yanjizhushou-shangchuan_maikefeng",on:{click:function(t){return e.Recording("start")}}})]),o("div",{staticClass:"sendMessage button",on:{click:function(t){return e.sendMessageInfo(e.socketMessageText,"groupText")}}},[e._v("发送")])])])],1)])],1)],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("i",{staticClass:"iconfont icon-iconfontzhizuobiaozhun22"}),n("input",{staticStyle:{width:"150px"},attrs:{type:"text",id:"suggestId",size:"20",placeholder:"用户附近搜索"}})])}],a=(n("6b54"),n("96cf"),n("3b8d")),s=(n("7f7f"),n("5df3"),n("4f7f"),n("75fc")),r=(n("386d"),n("c5f6"),n("ac4d"),n("8a81"),n("ac6a"),n("28a5"),n("2f62"),n("9fb0")),c=n("a474"),l=n("bc3a"),u=n.n(l),d=n("2f14"),h=n("5118"),m=(n("4be7"),{beforeRouteEnter:function(e,t,n){console.log(e.path);var o=window.location.href.split("?")[1]||"";o&&""!==o&&o.split("&").forEach(function(e){var t=e.split("=");sessionStorage.setItem(t[0],t[1])}),n()},created:function(){this.ListData0={status:"0",accountID:this.accountID},this.ListData1={status:"1",accountID:this.accountID},this.ListData2={status:"2",accountID:this.accountID},this.$store.dispatch(r["d"],this.accountID).then(function(t){e.userInfo=t,sessionStorage.setItem("userInfo",t)}).catch(function(e){return console.log(e)}),sessionStorage.getItem("accountID")||this.$router.push("/login");var e=this;e.$store.dispatch(r["j"],{accountID:sessionStorage.getItem("accountID")}).then(function(t){function n(){e.websocket=new WebSocket("wss://im-msg-weixin.jiama.online/wss"),e.websocket.onopen=function(){console.log("websocket success"),e.websocket.send(JSON.stringify({opt:"connect",accountID:e.accountID,msgToken:t.msgToken,timestamp:1559568992,lat:31.01,lon:121.01})),e.getListOrder(e.ListData1),e.getPushListOrder(e.ListData0),e.getEndOrderList(e.ListData2)},e.websocket.onerror=function(){console.log("WebSocket连接发生错误")},e.websocket.onmessage=function(t){var n=JSON.parse(t.data);if(console.log(n),i(),"kfNotice"==n.msgType){var o=[];o.push(n),console.log(n),e.updataPushMapOverview(o),e.openSuccess("系统推送一条新单")}else if("groupText"==n.msgType||"groupPic"==n.msgType||"groupVoice"==n.msgType||"groupMap"==n.msgType)n.groupID==e.currentServiceInfo.channelID&&(e.chatMessageList.push(n),"groupMap"==n.msgType&&(n.msgObj.map=JSON.parse(n.msgObj.map),Object(h["setTimeout"])(function(){var e=new BMap.Map("groupMap"+n.msgTime),t=new BMap.Point(n.msgObj.map.lng,n.msgObj.map.lat);e.centerAndZoom(t,19);var o=new BMap.Marker(t);e.addOverlay(o)},1)),e.handleScroll());else if("kfWelcome"==n.msgType||"kfEnd"==n.msgType)e.chatMessageList.push(n);else if("kfApply"==n.msgType){var a=!0,s=!1,r=void 0;try{for(var c,l=e.innerLeftList[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var u=c.value;u.orderID==n.orderID&&(u.leftListCover=!0)}}catch(d){s=!0,r=d}finally{try{a||null==l.return||l.return()}finally{if(s)throw r}}}else"kfOrderSuccess"==n.msgType&&Object(h["setTimeout"])(function(){var e=document.getElementsByClassName("Overlay"+n.msgObj.orderID);e.remove(e)},50);Object(h["setTimeout"])(function(){e.handleScroll()},50)},e.websocket.onclose=function(t){clearTimeout(e.timeoutObj),console.log("connection closed ("+t.code+")"),o()}}function o(){e.lockReconnect||(e.lockReconnect=!0,e.timeoutnum&&clearTimeout(e.timeoutnum),e.timeoutnum=Object(h["setTimeout"])(function(){n(),e.lockReconnect=!1},!1))}function i(){console.log("start  go");e.timeoutObj=Object(h["setInterval"])(function(){console.log(".11");var t=Date.parse(new Date)/1e3;e.websocket.send(JSON.stringify({opt:"heart",accountID:e.accountID,msgToken:e.msgToken,timestamp:t,isKF:1,gps:[{E:121.30692,N:31.16184,V:0,D:-1,A:13,T:t}]}))},3e4)}n()}).catch(function(e){console.log(e)})},name:"index",props:{msg:String},data:function(){return{errorImgSrc:'this.src="'+n("89a1")+'"',orderhelp:n("7b53"),orderSOS:n("a33b"),loadingImg:n("cf1c"),clock:n("2b5f"),currentO_id:"",WxAcodeVisible:!1,WxAcode:"",containerVisible:!0,containerVisible2:!1,userInfo:{},userPointLocationOrderInfo:[],innerLeftList:[],ListData0:{},ListData1:{},ListData2:{},accountID:sessionStorage.getItem("accountID"),accessToken:sessionStorage.getItem("accessToken"),innerRightMessageInfo:[],innerRightOrderMember:[],currentServiceNum:0,currentService:"当前服务(0)",endOrderList:[],dialogVisibleTransfer:!1,TranserList:[],commonWordList:["问候语ni好吗","我不好你个垃圾","我可以帮您查路况，查地点，设置导航位置，没事唠嗑也行！也可以帮你查周围的停车、加油等服务点。"],commonProblemList:["车子有问题拿去卖破烂","车子没问题拿去卖铁"],beTransfer:"",edit:0,inputEndOrderAdress:"上海市-普陀区-镇坪路389号",textareaEndOrderDesc:"请描述用户所咨询的问题",startTime:"",endTime:"",duration:"",textarea:"",currentAdvisory:0,status:"1",socketMessageText:"",index:Number,endindex:Number,Tindex:Number,leftListActive:"",visible2:!1,visible3:!1,innerRightVisible:!1,readyWorkOut:!1,dialogVisibleEndOrder:!1,ak:"G1ZqRQeFuAutcV5NYPiVvdaMNQ5tWpp9",currentServiceInfo:{},map:{},map2:{},BMap:{},currentGps:{},searchLocation:{},Overlay:{},Point:{},msgToken:"",websocket:null,chatMessageList:[],loading:!1,zcount:0,count:0,page:0,noMore:!1,recordingVisible:!0,lockReconnect:!1,timeout:2e3,timeoutObj:null,serverTimeoutObj:null,timeoutnum:null,lastRunTime:Date.now(),mapPoint:[],callShow:!1,callUserList:[{headPic:n("a33b"),nickName:"放的地方",userId:"556556"},{headPic:n("a33b"),nickName:"放的地方",userId:"12566452"}],clickItemUserList:[],infoShow:!1,roomName:"",againVit:!1,myRoom:"",roomAdminShow:!1,onlineCallShow:!1,myInfo:{},callList:[{headPic:n("a33b"),nickName:"放的地方",userId:"dfgdfg"},{headPic:n("a33b"),nickName:"放的地方",userId:"12566452"}],clickItemUser:{headPic:n("a33b"),nickName:"放的地方",userId:"12566452"}}},mounted:function(){var e=this;e.map=new BMap.Map("container");e.map;e.map.centerAndZoom(new BMap.Point(116.328,40.02),15),e.map.enableScrollWheelZoom(!0),e.map.addControl(new BMap.ScaleControl),e.map.addControl(new BMap.OverviewMapControl),e.map2=new BMap.Map("container2");var t=e.map2;function n(e){return document.getElementById(e)}e.map2.centerAndZoom(new BMap.Point(116.328,40.02),15),e.map2.enableScrollWheelZoom(!0),e.map2.addControl(new BMap.ScaleControl),e.map2.addControl(new BMap.OverviewMapControl),document.getElementById("socketMessageList").addEventListener("scroll",this.loadingScroll);var o,i=new BMap.Autocomplete({input:"suggestId",location:t});function a(){function n(){var n=i.getResults().getPoi(0).point;e.searchLocation=n,t.centerAndZoom(n,18),t.addOverlay(new BMap.Marker(n));var o=document.querySelectorAll("span.BMap_Marker");Object(h["setTimeout"])(function(){var e=!0,t=!1,n=void 0;try{for(var i,a=o[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;s.remove(s)}}catch(r){t=!0,n=r}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}},5e3)}var i=new BMap.LocalSearch(t,{onSearchComplete:n});i.search(o)}i.addEventListener("onhighlight",function(e){var t="",o=e.fromitem.value,i="";e.fromitem.index>-1&&(i=o.province+o.city+o.district+o.street+o.business),t="FromItem<br />index = "+e.fromitem.index+"<br />value = "+i,i="",e.toitem.index>-1&&(o=e.toitem.value,i=o.province+o.city+o.district+o.street+o.business),t+="<br />ToItem<br />index = "+e.toitem.index+"<br />value = "+i,n("searchResultPanel").innerHTML=t}),i.addEventListener("onconfirm",function(e){var t=e.item.value;o=t.province+t.city+t.district+t.street+t.business,n("searchResultPanel").innerHTML="onconfirm<br />index = "+e.item.index+"<br />myValue = "+o,a()})},methods:{getWxAcode:function(){var e=this;this.WxAcodeVisible=!0;var t=Date.parse(new Date)/1e3,n=d["a"].gainPhone({appKey:"7863228592",timestamp:t});u()({url:"/oauth/getWxAcodeUnlimit",method:"POST",data:{scene:"123456",page:"webpages/pages/webpage"},headers:{appKey:"7863228592",timestamp:t,sign:n}}).then(function(t){console.log(t),e.WxAcode="data:image/jpeg;base64,"+t.data.RESULT}).catch(function(e){console.log(e)})},SwitchPage:function(){this.containerVisible2=!1,this.containerVisible=!0},SelectTransfer:function(e,t){this.Tindex=t,this.beTransfer=e},userTransfer:function(){var e=this,t={kfInfo:this.beTransfer,userInfo:this.userInfo};console.log(t),c["a"].changeKf(t).then(function(t){"success"==t?(e.getListOrder(e.ListData1),e.innerRightVisible=!1,e.openSuccess("移交成功")):e.onerror("移交失败"),e.dialogVisibleTransfer=!1}).catch(function(t){console.log(t),e.onerror("移交失败")})},transfer:function(){this.readyWorkOut=!1,this.dialogVisibleTransfer=!0;var e=this;c["a"].getKfList({spID:this.userInfo.spID}).then(function(t){console.log(t),e.TranserList=t}).catch(function(e){console.log(e)})},holdout:function(){this.$router.push("/login")},workquit:function(){this.readyWorkOut=!0,this.currentAdvisory=this.innerLeftList.length},updataMapOverview:function(e){var t=this;function n(e,t){this._point=e,this.data=t}if(n.prototype=new BMap.Overlay,n.prototype.initialize=function(e){this._map=e;var n=this._div=document.createElement("div");n.style.position="absolute",n.style.overflow="hidden",n.style.fontSize="12px",n.style.textAlign="center",n.style.cursor="pointer",n.className="Overlay"+this.data.orderID,n.style.zIndex=BMap.Overlay.getZIndex(this._point.lat);var o=this._p=document.createElement("p"),i=this._img=document.createElement("img"),a=this._tipImg=document.createElement("img");o.appendChild(document.createTextNode(this.data.nickName)),i.setAttribute("src",this.data.headPic),a.setAttribute("src",t.orderhelp),i.style.width="30px",i.style.height="30px",i.style.border="2px solid #005ced",i.style.boxShadow="0px 0px 8px #005ced",i.style.borderRadius="50px",a.style.width="118px",a.style.height="65px";var s=document.createElement("div");s.className="ClockTime",s.style.backgroundColor="white",s.style.display="inline-block",s.style.padding="4px",s.style.borderRadius="10px";var c=document.createElement("img");c.style.height="20px",c.style.verticalAlign="middle",c.setAttribute("src",t.clock);var l=document.createElement("span"),u=this,d=document.createTextNode(this.num),m=Date.parse(new Date)/1e3,g=m-u.data.cTime<=0?0:m-u.data.cTime,p=Math.floor(g/3600);g%=3600;var f=Math.floor(g/60);g%=60;var v=g;Object(h["setInterval"])(function(){v++,v>=60&&(v=1,f++),f>=60&&(p++,f=0),l.innerText=p+"小时"+f+"分钟"+v+"秒"},1e3);var A=document.createElement("div");l.appendChild(d),s.appendChild(c),s.appendChild(l),A.appendChild(s),n.appendChild(a),n.appendChild(A),n.appendChild(i),n.appendChild(o);var y=this.data;return n.onclick=function(e){console.log(t.accountID);var o=t.userInfo;console.log(o),o.lng="116.358",o.lat="40.050",console.log(o);var i={userInfo:o,orderID:y.orderID,channelID:y.channelID};console.log(i),t.$store.dispatch(r["k"],i).then(function(e){t.openSuccess("抢单成功"),t.getListOrder(t.ListData1),n.remove(n)}).catch(function(e){console.log(e),t.openError("抢单失败")})},t.map.getPanes().labelPane.appendChild(n),n},n.prototype.draw=function(){var e=this._map,t=e.pointToOverlayPixel(this._point);this._div.style.left=t.x+"px",this._div.style.top=t.y-30+"px"},e&&e[0]&&e.length>=1){var o=!0,i=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,u={lng:l.lng,lat:l.lat},d=new n(u,l);t.map.addOverlay(d)}}catch(m){i=!0,a=m}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}},updataPushMapOverview:function(e){var t=this;function n(e,t){this._point=e,this.data=t}if(n.prototype=new BMap.Overlay,n.prototype.initialize=function(e){this._map=e;var n=this._div=document.createElement("div");n.style.position="absolute",n.style.overflow="hidden",n.style.fontSize="12px",n.style.textAlign="center",n.style.cursor="pointer",n.className="Overlay"+this.data.orderID,n.style.zIndex=BMap.Overlay.getZIndex(this._point.lat);var o=this._p=document.createElement("p"),i=this._img=document.createElement("img"),a=this._tipImg=document.createElement("img");o.appendChild(document.createTextNode(this.data.msgObj.nickName)),i.setAttribute("src",this.data.msgObj.headPic),a.setAttribute("src",t.orderhelp),console.log(this.data),i.style.width="30px",i.style.height="30px",i.style.border="2px solid #005ced",i.style.boxShadow="0px 0px 8px #005ced",i.style.borderRadius="50px",a.style.width="118px",a.style.height="65px";var s=document.createElement("div");s.className="ClockTime",s.style.backgroundColor="white",s.style.display="inline-block",s.style.padding="4px",s.style.borderRadius="10px";var c=document.createElement("img");c.style.height="20px",c.style.verticalAlign="middle",c.setAttribute("src",t.clock);var l=document.createElement("span"),u=this,d=document.createTextNode(this.num),m=Date.parse(new Date)/1e3,g=m-u.data.msgObj.cTime<=0?0:m-u.data.msgObj.cTime;console.log("======"),console.log(m-u.data.cTime),console.log(g);var p=Math.floor(g/3600);g%=3600;var f=Math.floor(g/60);g%=60;var v=g;Object(h["setInterval"])(function(){p=f+1>=60?p+1:p+1>=60?0:p,f=v+1>=60?f+1:f+1>=60?0:f,v=v+1>=60?0:v+1,l.innerText=p+"小时"+f+"分钟"+v+"秒"},1e3);var A=document.createElement("div");l.appendChild(d),s.appendChild(c),s.appendChild(l),A.appendChild(s),n.appendChild(a),n.appendChild(A),n.appendChild(i),n.appendChild(o);var y=this.data;return n.onclick=function(e){var o=t.userInfo;console.log(o),o.lng="116.358",o.lat="40.050",console.log(o);var i={userInfo:o,orderID:y.orderID,accountID:t.accountID};t.$store.dispatch(r["k"],i).then(function(e){t.openSuccess("抢单成功"),t.getListOrder(t.ListData1),n.remove(n)}).catch(function(e){console.log(e),t.openError("抢单失败")})},t.map.getPanes().labelPane.appendChild(n),n},n.prototype.draw=function(){var e=this._map,t=e.pointToOverlayPixel(this._point);this._div.style.left=t.x+"px",this._div.style.top=t.y-30+"px"},console.log(e),e&&e[0].msgObj&&e.length>=1){var o=!0,i=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,u={lng:l.msgObj.lng,lat:l.msgObj.lat},d=new n(u,l);t.map.addOverlay(d)}}catch(m){i=!0,a=m}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}},createPushMapUser:function(e){var t=this;function n(e,t){this._point=e,this.data=t}n.prototype=new BMap.Overlay,n.prototype.initialize=function(e){this._map=e;var n=this._div=document.createElement("div");n.style.position="absolute",n.style.overflow="hidden",n.style.fontSize="12px",n.style.width="50px",n.style.textAlign="center",n.style.cursor="pointer",n.className="OverlayUserMove",n.style.zIndex=BMap.Overlay.getZIndex(this._point.lat);var o=this._p=document.createElement("p"),i=this._img=document.createElement("img");return o.appendChild(document.createTextNode(this.data.nickName)),i.setAttribute("src",this.data.headPic),i.style.width="30px",i.style.height="30px",i.style.border="2px solid #005ced",i.style.boxShadow="0px 0px 8px #005ced",i.style.borderRadius="50px",n.appendChild(i),n.appendChild(o),t.map2.getPanes().labelPane.appendChild(n),n},n.prototype.draw=function(){var e,t=this._map,n=this;Object(h["setInterval"])(function(){e=t.pointToOverlayPixel(n._point),n._div.style.left=e.x+"px",n._div.style.top=e.y-30+"px"},10)};var o={lng:e.gps.lng,lat:e.gps.lat},i=new n(o,e);t.map2.addOverlay(i)},removeOverlay:function(){var e=document.querySelectorAll("div.OverlayUserMove"),t=!0,n=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.remove(s)}}catch(r){n=!0,o=r}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}},getPushListOrder:function(e){var t=this;this.$store.dispatch(r["h"],e).then(function(e){"error"==e.status?t.endOrderList=[]:(t.userPointLocationOrderInfo=e,t.updataMapOverview(t.userPointLocationOrderInfo),console.log(t.userPointLocationOrderInfo))}).catch(function(e){console.log(e)})},getEndOrderList:function(e){console.log(123);var t=this;this.$store.dispatch(r["g"],e).then(function(e){"error"==e.status?t.endOrderList=[]:t.endOrderList=e}).catch(function(e){console.log(e)})},handleScroll:function(){var e=document.getElementById("socketMessageList");document.getElementById("socketMessageListUl").offsetHeight;e.scrollTop=e.scrollHeight},getListOrder:function(e){var t=this;this.$store.dispatch(r["g"],e).then(function(n){if("0"==e.status)console.log(n),t.userPointLocationOrderInfo=n;else if("1"==e.status)if(console.log(n),"error"==n.status)t.innerLeftList=[];else{t.innerLeftList=[];var o=!0,i=!1,a=void 0;try{for(var s,r=n[Symbol.iterator]();!(o=(s=r.next()).done);o=!0){var c=s.value;c.leftListCover=!1,c.tip=0,t.innerLeftList.push(c)}}catch(l){i=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}t.currentServiceNum=t.innerLeftList.length}}).catch(function(e){console.log(e)})},joinChannel:function(e){this.$store.dispatch(r["f"],e).then(function(e){console.log("joinChannel"),console.log(e)}).catch(function(e){console.log(e)})},getMessageInfo:function(e,t,n){var o=this;this.removeOverlay(),o.containerVisible=!1,this.containerVisible2=!0,this.currentServiceInfo=e,o.chatMessageList=[],this.currentServiceInfo.option=n,"start"==n?this.index=t:"end"==n&&(this.endindex=t),o.innerRightOrderMember=[],this.innerRightVisible=!0;var i={orderID:e.orderID,accountID:e.accountID,isInit:!1};o.$store.dispatch(r["e"],i).then(function(e){o.innerRightOrderMember=e,console.log(e),o.getUserLocation(e),Object(h["setTimeout"])(function(){o.map2.centerAndZoom(new BMap.Point(o.currentGps.lng,o.currentGps.lat),15)},1e3),Object(h["setInterval"])(function(){o.removeOverlay(),o.getUserLocation(e)},3e4)}).catch(function(e){console.log(e)}),o.page=1,o.getChatLog(e.channelID),Object(h["setTimeout"])(function(){o.handleScroll()},500),console.log(e)},getUserLocation:function(e){var t=this,n=e;console.log(e);var o=!0,i=!1,a=void 0;try{for(var s,r=function(){var e=s.value;if(e.accountID==t.accountID)return"continue";c["a"].getUserLocation({accountID:e.accountID}).then(function(n){"error"!==n.status&&(e.gps=n,t.createPushMapUser(e)),"1"==e.userType&&(t.currentGps=n)}).catch(function(e){console.log(e)})},l=n[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)r()}catch(u){i=!0,a=u}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}},getChatLog:function(e){this.loading=!0;var t=this,n={channelID:e,page:t.page,step:"20",isUp:"up"};console.log(t.page),c["a"].getChatList(n).then(function(e){if(console.log(e),t.count=e.count,t.zcount=e.zcount,t.page=t.page+1,e.list<1)return t.loading=!1,void(t.noMore=!0);var n=!0,o=!1,i=void 0;try{for(var a,r=function(){var e=a.value;t.chatMessageList.unshift(e),"groupMap"==e.msgType&&(e.msgObj.map=JSON.parse(e.msgObj.map),console.log(e),Object(h["setTimeout"])(function(){var t=new BMap.Map("groupMap"+e.msgTime),n=new BMap.Point(e.msgObj.map.lng,e.msgObj.map.lat);console.log(n),t.centerAndZoom(n,19);var o=new BMap.Marker(n);t.addOverlay(o)},1)),t.loading=!1},c=e.list[Symbol.iterator]();!(n=(a=c.next()).done);n=!0)r()}catch(l){o=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}t.chatMessageList=Object(s["a"])(new Set(t.chatMessageList)),t.loading=!1}).catch(function(e){console.log(e)})},loadingScroll:function(){var e=this,t=document.getElementById("socketMessageList");document.getElementById("socketMessageListUl").offsetHeight;0==t.scrollTop&&(console.log("show"),e.getChatLog(e.currentServiceInfo.channelID))},sendImg:function(){var e,t=document.getElementById("uploadInput").files[0],n=new FileReader,o=this;t.size.toFixed(1)>2097152?o.openError("文件不能大于2M"):(n.readAsDataURL(t),n.onload=function(){e=n.result,c["a"].uploadOssImg({base64:e}).then(function(e){o.sendMessageInfo(e,"groupPic"),console.log(e)}).catch(function(e){o.openError("上传失败")})})},Recording:function(e){var t=this,n=Recorder();console.log(n),n.open(function(){n.start(),t.$confirm("正在录音，点击录音完成发送给用户","温馨提示",{confirmButtonText:"录音完成",cancelButtonText:"取消录音",type:"success"}).then(function(){t.$message({type:"success",message:"录音发送成功!"}),n.stop(function(e,o){n.close();var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){var n=e.target.result;c["a"].uploadOssFile({base64:n}).then(function(e){console.log(e),t.sendMessageInfo(e,"groupVoice"),console.log(e)}).catch(function(e){t.openError("上传失败")})}})}).catch(function(){t.$message({type:"info",message:"录音发送失败"}),n.stop(function(e,t){n.close()})})})},saveChatLog:function(e,t,n){e.id,e.name,e.avatar,uinfo.username,accountID,e.groupID},sendLocation:function(){this.sendMessageInfo(JSON.stringify(this.searchLocation),"groupMap"),this.handleScroll()},sendMessageInfo:function(e,t){if("end"!=this.currentServiceInfo.option)if("groupText"!=t||""!=e.trim()){var n=this,o={userInfo:{accountID:n.userInfo.accountID,nickName:n.userInfo.nickName,headPic:n.userInfo.headPic,lng:"116.358",lat:"40.050",userType:2},content:e,msgType:t,channelID:n.currentServiceInfo.channelID,orderID:n.currentServiceInfo.orderID};Object(h["setTimeout"])(function(){n.$store.dispatch(r["a"],o).then(function(e){n.socketMessageText=""}).catch(function(e){console.log(e),n.openError("发送失败")})},30),Object(h["setTimeout"])(function(){n.handleScroll()},0)}else this.$message.error("消息不能为空");else this.$message.error("当前服务单已经结束")},EndOrderStart:function(){this.dialogVisibleEndOrder=!0,console.log(this.currentServiceInfo),this.startTime=d["a"].formatData(new Date(1e3*this.currentServiceInfo.start_time)),this.endTime=d["a"].formatData(new Date),this.calcDuration(this.currentServiceInfo.start_time)},calcDuration:function(e){var t=Date.parse(new Date)/1e3,n=t-e,o=Math.floor(n/3600)+"小时";n%=3600;var i=Math.floor(n/60)+"分钟";n%=60;var a=n+"秒";this.duration=o+i+a},EndOrder:function(){var e=this,t=this.userInfo,n=this,o={userInfo:t,channelID:this.currentServiceInfo.channelID,desc:this.textareaEndOrderDesc,address:this.inputEndOrderAdress,endTime:this.endTime};console.log(o),console.log(n.innerLeftList),this.$store.dispatch(r["i"],o).then(function(t){e.openSuccess("结单成功"),n.innerLeftList=n.innerLeftList.filter(function(e){return e.channelID!=o.channelID}),n.endOrderList.push(e.currentServiceInfo),n.currentServiceNum=n.innerLeftList.length}).catch(function(t){console.log(t),e.openError("结单失败")}),n.currentServiceNum=n.innerLeftList.length,this.dialogVisibleEndOrder=!1,this.innerRightVisible=!1,this.removeOverlay()},openError:function(e){this.$message.error(e)},openSuccess:function(e){this.$message({message:e,type:"success"})},messageStyle:function(e){return e==this.accountID?"message-item-self":"message-item"},toCall:function(){this.callShow=!0;var e=!0,t=!1,n=void 0;try{for(var o,i=this.callUserList[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.$set(a,"check",!1)}}catch(s){t=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},kickoutUser:function(){var e=this;this.$confirm("确认将"+this.clickItemUser.nick_name+"踢出回话房间？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.roomAdminShow=!1,e.myRoom.kickoutUser(e.clickItemUser.accountID)}).catch(function(){})},startCall:function(){0===this.clickItemUserList.length?this.$message({showClose:!0,message:"请选择呼叫人员",type:"error"}):this.clickItemUserList.length>8?this.$message({showClose:!0,message:"最多只能呼叫8个人",type:"error"}):this.infoShow=!0},allNoCheck:function(){var e=!0,t=!1,n=void 0;try{for(var o,i=this.callUserList[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.$set(a,"check",!1)}}catch(s){t=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.clickItemUserList=[]},ischeck:function(e){if(this.$set(e,"check",!e.check),e.check)this.clickItemUserList.push(e);else for(var t=this.clickItemUserList.length-1;t>=0;t--)this.clickItemUserList[t].userId===e.userId&&this.clickItemUserList.splice(t,1)},toMetud:function(e){if(this.metud=e,this.metud){var t=QNRTC.deviceManager.getLocalTracks({audio:{enabled:!0,tag:"audio",muted:!0}});this.myRoom.publish(t)}else{var n=QNRTC.deviceManager.getLocalTracks({audio:{enabled:!0,tag:"audio",muted:!1}});this.myRoom.publish(n)}},toShowUserList:function(e){var t=this;console.log(e),$(".userListDialog").animate({right:"0"},100),0===e?(this.$store.commit("updateActiveIndexTab",0),1===this.myInfo.role?this.$store.dispatch("POP_POST_GETCUSTOMERUSERLIST",{accountID:this.myInfo.accountID,status:"1"}).then(function(e){console.log(e,"客户"),t.$store.commit("updateUserActiveList",e)}):this.$store.dispatch("POP_POST_GETNEARUSERLIST",{cityCode:this.myInfo.cityCode}).then(function(e){console.log(e,"在线"),t.$store.commit("updateUserActiveList",e)})):1===e||(this.$store.commit("updateActiveIndexTab",2),this.$store.dispatch("POP_POST_GETCUSTOMERUSERLIST",{accountID:this.myInfo.accountID}).then(function(e){console.log(e,"客户"),t.$store.commit("updateUserActiveList",e)}))},toAdminRoom:function(e){console.log(e),this.clickItemUser={accountID:e.accountID,user_header:e.user_header,nick_name:e.nick_name},this.roomAdminShow=!0},leaveRoom:function(){document.getElementById("callout").pause(),document.getElementById("off").play(),this.roomName="",this.callList=[],this.clickItemUserList=[],this.againVit=!1,this.onlineCallShow=!1,this.myRoom.leaveRoom(),this.callUserList=[],clearTimeout(this.timeout)},call:function(){this.$store.commit("updateAgainVit",!1),this.againVit=!0;var e={accountID:this.clickItem.accountID,user_header:this.clickItem.headPic,nick_name:this.clickItem.nickName,lat:this.clickItem.lat,lng:this.clickItem.lng,online:!1};this.clickItemUserList.push(e),this.infoShow=!0},hiddenDialog:function(){this.clickItemUserList=[],this.callShow=!1,this.callUserList=[]},addCallUser:function(){this.againVit=!0,this.callShow=!0,this.callUserList=this.mapUserList},createRoom:function(){var e=this;if(this.myRoom=new QNRTC.TrackModeSession,!QNRTC.version)return this.$alert("您的浏览器不支持语音通话，请切换谷歌浏览器使用","温馨提示",{confirmButtonText:"确定"}),this.roomName="",this.myRoom="",!1;if(console.log("current version is",QNRTC.version),this.onlineCallShow=!0,this.callShow=!1,this.infoShow=!1,document.getElementById("callout").play(),this.roomName){console.log(this.myInfo,9999999);var t=[],n=!0,o=!1,i=void 0;try{for(var s,r=function(){var n=s.value,o=0,i=!0,a=!1,r=void 0;try{for(var c,l=e.callList[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;u.accountID===n.accountID&&(o=1)}}catch(d){a=!0,r=d}finally{try{i||null==l.return||l.return()}finally{if(a)throw r}}0===o?(t.push(n.accountID),console.log(n,1.0215555555555555e32),e.$set(n,"online",!1),e.$set(n,"user_name",n.nick_name),e.callList.push(n),e.timeout=Object(h["setTimeout"])(function(){console.log(n),n.online||(e.$message({message:n.user_name+"未接听通话",type:"warning"}),e.callList.forEach(function(t,o){console.log(t,o),t.accountID===n.accountID&&(e.callList.splice(o,1),1===e.callList.length&&(Object(h["setTimeout"])(function(){e.$message({message:"即将结束通话",type:"warning"})},1e3),Object(h["setTimeout"])(function(){e.roomName="",e.onlineCallShow=!1,document.getElementById("callout").pause(),document.getElementById("off").play(),e.myRoom.leaveRoom()},3e3)))}))},6e4)):e.$message({showClose:!0,message:n.nick_name+"正在通话中",type:"error"})},c=this.clickItemUserList[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)r()}catch(k){o=!0,i=k}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}var l={fromUser:this.myInfo.accountID,toUser:t.join(","),msgType:"qnNotice",msgTime:(new Date).getTime(),msgObj:{appId:"e6tc2sxx0",roomName:this.roomName,reason:this.textarea,st:0}};this.$store.dispatch("POP_POST_SENDTALKMSG",l).then(function(t){var n={appId:"e6tc2sxx0",accountID:e.myInfo.accountID,roomName:e.roomName,permission:"admin",expireAt:"3600"};e.$store.dispatch("POP_POST_APPTOKEN",n).then(function(t){e.clickItemUserList=[],e.callUserList=[],b(t.data,e.roomName)})})}else{this.callList=[],this.$set(this.myInfo,"online",!0),this.callList.push(this.myInfo);var u=[],d=!0,m=!1,g=void 0;try{for(var p,f=function(){var t=p.value,n=0,o=!0,i=!1,a=void 0;try{for(var s,r=e.callList[Symbol.iterator]();!(o=(s=r.next()).done);o=!0){var c=s.value;c.accountID===t.accountID&&(n=1)}}catch(k){i=!0,a=k}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}0===n&&(u.push(t.accountID),console.log(t,1.0215555555555555e32),e.$set(t,"online",!1),e.$set(t,"user_name",t.nick_name),e.callList.push(t),e.timeout=Object(h["setTimeout"])(function(){console.log(t),t.online||(e.$message({message:t.user_name+"未接听通话",type:"warning"}),e.callList.forEach(function(n,o){console.log(n,o),n.accountID===t.accountID&&(e.callList.splice(o,1),1===e.callList.length&&(Object(h["setTimeout"])(function(){e.$message({message:"即将结束通话",type:"warning"})},1e3),Object(h["setTimeout"])(function(){e.roomName="",e.onlineCallShow=!1,document.getElementById("callout").pause(),document.getElementById("off").play(),e.myRoom.leaveRoom()},3e3)))}))},6e4))},v=this.clickItemUserList[Symbol.iterator]();!(d=(p=v.next()).done);d=!0)f()}catch(k){m=!0,g=k}finally{try{d||null==v.return||v.return()}finally{if(m)throw g}}this.$store.dispatch("POP_POST_INITROOM",{appId:"e6tc2sxx0",accountID:this.myInfo.accountID}).then(function(t){console.log(t),e.roomName=t.roomName;var n=[],o=!0,i=!1,a=void 0;try{for(var s,r=e.clickItemUserList[Symbol.iterator]();!(o=(s=r.next()).done);o=!0){var c=s.value;n.push(c.accountID)}}catch(k){i=!0,a=k}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}var l={fromUser:e.myInfo.accountID,toUser:n.join(","),msgType:"qnNotice",msgTime:(new Date).getTime(),msgObj:{appId:"e6tc2sxx0",roomName:t.roomName,reason:e.textarea,st:0}};console.log(l,"sendtalkmsg111111111111"),e.$store.dispatch("POP_POST_SENDTALKMSG",l).then(function(n){console.log(t,"sendtalkmsg22222222222");var o={appId:"e6tc2sxx0",accountID:e.myInfo.accountID,roomName:t.roomName,permission:"admin",expireAt:"3600"};e.$store.dispatch("POP_POST_APPTOKEN",o).then(function(n){e.clickItemUserList=[],e.callUserList=[],b(n.data,t.roomName)})})})}var A=this,y=document.getElementById("ado");function b(e,t){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.myRoom.joinRoomWithToken(t);case 3:A.$store.dispatch("POP_POST_INITROOM",{appId:"e6tc2sxx0",accountID:A.myInfo.accountID}).then(function(e){A.$store.dispatch("POP_POST_LISTUSER",{appId:"e6tc2sxx0",roomName:n}).then(function(e){if(console.log(e,5555555656568566),JSON.parse(e.data.body).users.length>0){var t=!0,n=!1,o=void 0;try{for(var i,a=JSON.parse(e.data.body).users[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,r=0,c=!0,l=!1,u=void 0;try{for(var d,h=A.callList[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var m=d.value;m.accountID===s.userId&&(r=1)}}catch(k){l=!0,u=k}finally{try{c||null==h.return||h.return()}finally{if(l)throw u}}0===r&&A.$store.dispatch("POP_POST_GETMYSELFINFO",{accountID:s.userId}).then(function(e){A.$set(e,"online",!0),A.callList.push(e)})}}catch(k){n=!0,o=k}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}}})}),O(A.myRoom.trackInfoList),e.next=16;break;case 7:return e.prev=7,e.t0=e["catch"](0),console.error(e.t0),this.roomName="",document.getElementById("callout").pause(),document.getElementById("off").play(),this.myRoom.leaveRoom(),alert("加入房间失败！ErrorCode: ".concat(e.t0.code||"")),e.abrupt("return");case 16:return A.myRoom.on("user-join",function(e){document.getElementById("callout").pause();var t=!0,n=!1,o=void 0;try{for(var i,a=A.callList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.accountID===e.userId&&A.$set(s,"online",!0)}}catch(k){n=!0,o=k}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}}),A.myRoom.on("track-add",function(e){console.log("new tracks",e,0xc0bf3edba31790000)}),A.myRoom.on("track-add",function(e){O(e)}),A.myRoom.on("user-leave",function(e){console.log("user leave!",e,9556565656566),A.callList.forEach(function(t,n){console.log(t,n),t.accountID===e.userId&&(A.callList.splice(n,1),1===A.callList.length&&(A.$message({message:t.user_name+"已中断通话",type:"warning"}),Object(h["setTimeout"])(function(){A.$message({message:"即将结束通话",type:"warning"})},1e3),Object(h["setTimeout"])(function(){A.roomName="",A.onlineCallShow=!1,document.getElementById("callout").pause(),document.getElementById("off").play(),A.myRoom.leaveRoom()},3e3)))})}),e.next=22,C();case 22:case"end":return e.stop()}},e,this,[[0,7]])})),I.apply(this,arguments)}function C(){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(QNRTC.deviceManager,99999),e.next=3,QNRTC.deviceManager.getLocalTracks({audio:{enabled:!0,tag:"audio"}});case 3:return t=e.sent,console.log("my local tracks",t),e.next=7,A.myRoom.publish(t);case 7:console.log("publish success!");case 8:case"end":return e.stop()}},e)})),w.apply(this,arguments)}function O(e){A.myRoom.subscribe(e.map(function(e){return e.trackId})).then(function(e){var t=!0,n=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.play(y)}}catch(k){n=!0,o=k}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}})}},sureCall:function(){var e=this;this.roomName&&!this.againVit?this.$confirm("您正在通话中，是否挂掉当前通话，建立新的通话？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.commit("updateOnlineCallShow",!1),e.roomName="",document.getElementById("callout").pause(),document.getElementById("off").play(),e.myRoom.leaveRoom(),e.callList=[],e.createRoom()}).catch(function(){return!1}):this.createRoom()}},filters:{timeFormat:function(e){var t=Date.parse(new Date),n=t/1e3-e,o=new Date(1e3*e);return n<300&&n>60?parseInt(n/60)+"分钟前":o.toLocaleString()},diff:function(e){var t=Date.parse(new Date)/1e3,n=t-e(Math.floor(n/60/60*100)/100).toString().split(".")[0]+"小时"+(Math.floor(n/60/60*100)/100).toString().split(".")[1]+"分钟"}},computed:{disabled:function(){return this.loading||this.noMore}},watch:{currentServiceNum:function(e){this.currentService="当前服务("+e+")"},innerLeftList:function(e){}}}),g=m,p=(n("46f0"),n("2877")),f=Object(p["a"])(g,o,i,!1,null,"11e9d31e",null);t["default"]=f.exports},"7b53":function(e,t,n){e.exports=n.p+"img/orderhelp.297ad92b.jpg"},"89a1":function(e,t,n){e.exports=n.p+"img/ServiceLogo.75e45795.png"},"9fb0":function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"g",function(){return i}),n.d(t,"k",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"i",function(){return r}),n.d(t,"f",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return h}),n.d(t,"m",function(){return m}),n.d(t,"l",function(){return g}),n.d(t,"j",function(){return p});var o="GET_KF_INFO",i="LIST_ORDER",a="UPDATE_ORDER",s="END_ORDER",r="OUT_KF_CHANNEL",c="JOIN_CHANNEL",l="LIST_PUSH_ORDER",u="INIT_ORDER",d="GET_CHAT_LOG",h="ADD_CHAT_LOG",m="UPLOAD_OSS_IMG",g="UPLOAD_OSS_FILE",p="REFRESH_MSG_TOKEN"},a33b:function(e,t,n){e.exports=n.p+"img/orderSOS.d100a05d.jpg"},a474:function(e,t,n){"use strict";var o=n("bc3a"),i=n.n(o),a=n("2f14");i.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8";var s=Date.parse(new Date)/1e3;function r(){var e=a["a"].gainPhone({appKey:"7863228592",timestamp:s,accessToken:sessionStorage.getItem("accessToken"),accountID:sessionStorage.getItem("accountID")});return e}var c={appKey:"7863228592",timestamp:s,accessToken:sessionStorage.getItem("accessToken"),accountID:sessionStorage.getItem("accountID"),sign:r()},l=i.a.create({headers:c,timeout:1e4});l.interceptors.response.use(function(e){var t=e.data,n=t.ERRORCODE;if(void 0===n)return t;switch(n){case 0:return t.RESULT;case"0":return t.RESULT;case 302:window.location.href=t.URL;break;default:return Promise.reject(t)}},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求地址不存在: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:break}return console.log(e.message),Promise.reject(e)});var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";return"get"===n.toLowerCase()?new Promise(function(n,o){l.get(e,{params:t}).then(function(e){n(e)}).catch(function(e){o(e)})}):"post"===n.toLowerCase()||"put"===n.toLowerCase()?new Promise(function(n,o){l.post(e,t).then(function(e){n(e)}).catch(function(e){n({status:"error",errCode:e.ERRORCODE,msg:e.RESULT.msg})})}):void 0},d={getKfInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uc/getKfInfo",e,"post")},listOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uorder/listOrder",e,"post")},listPushOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uorder/listPushOrder",e,"post")},createOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uorder/createOrder",e,"post")},updateOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uorder/updateOrder",e,"post")},getKfList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uc/getKfList",e,"post")},changeKf:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uc/changeKf",e,"post")},endOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uorder/endOrder",e,"post")},outKfChannel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/umsg/outKfChannel",e,"post")},joinChannel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/UMsg/joinChannel",e,"post")},refreshMsgToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/invokMessage/account/refreshMsgToken",e,"post")},initOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uOrder/initOrder",e,"post")},getUserLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/uc/getUserLocation",e,"post")},getChatLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/umsg/getChatLog",e,"post")},getChatList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/umsg/getChatList",e,"post")},addChatLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/umsg/addChatLog",e,"post")},uploadOssImg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/Upload/uploadOssImg",e,"post")},uploadOssFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u("/api/upload/uploadOssFile",e,"post")}};t["a"]=d},cf1c:function(e,t){e.exports="data:image/gif;base64,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"},dcf1:function(e,t,n){},e6cb:function(e,t,n){e.exports=n.p+"img/kefulogo.44748351.jpg"}});
//# sourceMappingURL=app.8fa0269f.js.map